<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<th:block th:fragment="body">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Nanum+Gothic+Coding&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.0/jquery.min.js"></script>
    <link rel="stylesheet" th:href="@{/user/registercss.css}">
    <script src="https://kit.fontawesome.com/51772bd9bd.js" crossorigin="anonymous"></script>


    <style>
        .im, .im2 {
            position: fixed;
            z-index: -5;
            pointer-events: none;
            opacity: 30%;
            color: #035599;
        }
    </style>
</head>
<body>

<i class="im fas fa-tshirt fa-5x"></i>
<i class="im fas fa-tshirt fa-spin fa-5x"></i>
<i class="im fas fa-tshirt fa-spin fa-5x"></i>
<i class="im fas fa-tshirt fa-5x"></i>

<i class="im2 fas fa-brands fa-redhat"></i>
<i class="im2 fas fa-brands fa-redhat"></i>
<i class="im2 fas fa-brands fa-redhat fa-spin fa-5x"></i>
<i class="im2 fas fa-brands fa-redhat fa-spin fa-5x"></i>
    <div>
        <img th:src="@{/image/logo.png}" id="logoimg" style="position: relative">
    </div>
    <hr id="hr1"/>
    <div id="registerbox">
        <form id="regform" th:action="@{/user/register}" method="post">
            <br><br><br><br>
            <div id="text03">회원가입</div>
            <br>
            <input id="inputid" class="form-control" name="username" type="text" placeholder="아이디 입력" th:value="${username }" required>
            <div><span class="text-danger" th:if="${error_username}" th:utext="${error_username}"></span></div>
            <input id="inputpw" class="form-control" name="password" type="password" placeholder="비밀번호 입력" required>

            <input id="inputname" type="text" name="name" class="form-control" placeholder="이름을 입력해주세요." th:value="${name}">
            <div><span class="text-danger" th:if="${error_name}" th:utext="${error_name}"></span></div>
            <input type="text" name="phone" class="form-control" placeholder="휴대폰번호를 입력해주세요." th:value="${phone}">
            <div><span class="text-danger" th:if="${error_phone}" th:utext="${error_phone}"></span></div>
            <input type="email" name="email" class="form-control" placeholder="이메일을 입력해주세요" th:value="${email}">
            <div><span class="text-danger" th:if="${error_email}" th:utext="${error_email}"></span></div>
            <input type="text" name="birth" class="form-control" placeholder="생년월일을 입력해주세요" th:value="${birth}">
            <div><span class="text-danger" th:if="${error_birth}" th:utext="${error_birth}"></span></div>
            <input type="text" name="addressName" class="form-control" placeholder="주소지명을 입력해주세요." th:value="${addressname}">
            <input type="text" name="street_search" class="form-control" placeholder="도로명 주소를 입력해주세요.">
            <select name="streetName" style="max-width: 500px"></select>
            <input type="text" id="street_addr" name="street_addr" class="form-control" placeholder="<도로명 주소 생성란>" th:value="${street_addr}" readonly>
            <div><span class="text-danger" th:if="${error_street_addr}" th:utext="${error_street_addr}"></span></div>
            <input type="text" id="detail_addr" name="detail_addr" class="form-control" placeholder="상세 주소를 입력해주세요." th:value="${detail_addr}">
            <div><span class="text-danger" th:if="${error_detail_addr}" th:utext="${error_detail_addr}"></span></div>
            <div id="text04">성별을 선택해주세요.</div>

            <div id="container-box">
                <i class='fas fa-male' id="man" style='font-size:48px;color:black'></i>
                <i class='fas fa-female' id="woman" style='font-size:48px;color:black'></i>
                <div class="gender-selection">
                    <label for="male" class="gender-option">남자</label>
                    <input type="radio" id="male" name="gender" value="0" required>
                    <label for="female" class="gender-option">여자</label>
                    <input type="radio" id="female" name="gender" value="1" required>
                </div>
            </div>

            <button class="btn btn-secondary btn-lg" id="regbtn" type="submit">회원가입</button>
        </form>
    </div>
</body>
<script th:src="@{/js/signIn.js}" type="text/javascript"></script>
<script th:inline="javascript">
    let $rainClothes = $(".im");
    let $rainClothes2 = $(".im2");
    let imArr = new Map();
    let imArr2 = new Map();
    let r_time = 6000;
    let r_time2 = 4000;

    let last_x = 0;
    let last_x2 = 0;

    $(document).ready(function() {
        for (let index = 0; index < $rainClothes.length; ++index) {
            let rand = parseInt(Math.floor(Math.random() * 10 + 1) / 2);
            $rainClothes.eq(index).removeClass("fa-5x");
            imArr.set(index, `fa-${rand}x`);
            $rainClothes.eq(index).addClass(imArr.get(index));
        }
        for (let index = 0; index < $rainClothes2.length; ++index) {
            let rand = parseInt(Math.floor(Math.random() * 10 + 1) / 2);
            $rainClothes2.eq(index).removeClass("fa-5x");
            imArr2.set(index, `fa-${rand}x`);
            $rainClothes2.eq(index).addClass(imArr2.get(index));
        }
    });

    (function loop() {
        $rainClothes.each(function(index, element) {
            let randomNumber = Math.random() || 1;
            let x = 100 * randomNumber;
            let t = 5000 + x * 100;
            r_time = Math.max(r_time, t);
            $(element).css("right", `${x + ((last_x) ? last_x / 10 * (Math.random() >= 0.5 ? -1 : 1) : 2 * (Math.random() >= 0.5 ? -1 : 1))}%`);
            $(element).css("top", randomNumber >= 0.5 ? `100%` : `-10%`);
            $(element).css("opacity", `30%`);
            $(element).animate({ 'top': randomNumber >= 0.5 ? '0%' : '100%', 'opacity': '0%' }, t);
            $.when($(element)).done(changeSize($(element), index));
            last_x = x;
        });
        $.when($rainClothes).done(loop);
    })();

    (function loop2() {
        $rainClothes2.each(function(index, element) {
            let randomNumber2 = Math.random() || 1;
            let x = 100 * randomNumber2;
            let t = 4000 + x * 100;
            r_time2 = Math.max(r_time, t);
            $(element).css("right", `${x + ((last_x2) ? last_x2 / 10 * (Math.random() >= 0.5 ? -1 : 1) : 2 * (Math.random() >= 0.5 ? -1 : 1))}%`);
            $(element).css("top", randomNumber2 >= 0.5 ? `100%` : `-10%`);
            $(element).css("opacity", `30%`);
            $(element).animate({ 'top': randomNumber2 >= 0.5 ? '0%' : '100%', 'opacity': '0%' }, t);
            $.when($(element)).done(changeSize2($(element), index));
            last_x2 = x;
        });
        $.when($rainClothes2).done(loop2);
    })();

    function changeSize(element, index) {
        let rand = parseInt(Math.floor(Math.random() * 10 + 1) / 2);
        $(element).removeClass(imArr.get(index));
        $(element).addClass(`fa-${rand}x`);
        imArr.set(index, `fa-${rand}x`);
    }

    function changeSize2(element, index) {
        let rand = parseInt(Math.floor(Math.random() * 10 + 1) / 2);
        $(element).removeClass(imArr2.get(index));
        $(element).addClass(`fa-${rand}x`);
        imArr2.set(index, `fa-${rand}x`);
    }
</script>
</th:block>
</html>