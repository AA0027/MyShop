<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://kit.fontawesome.com/51772bd9bd.js" crossorigin="anonymous"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js" defer></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.0/jquery.min.js"></script>
    <script type="text/javascript" src="/cho/js/prod/category.js"></script>
    <script src="/js/request.js"></script>
    <link rel="stylesheet" href="/cho/css/prod/category.css">
    <link rel="stylesheet" th:href="@{/css/request.css}">

    <title>주문 조회</title>

</head>
<body>
<div th:replace="~{cho/prod/header :: head}"></div>
<div th:replace="~{background::body}"></div>
<div th:replace="~{SecondaryBackground::body}"></div>

<div class="transInfo" th:each="item : ${PurchaseStatusList}" th:unless="${(item.status == 'CANCEL_OK') || (item.status == 'CANCEL')}">
    <div class="transInfo2" >
        <!-- 배송완료랑 결제완료만 -->
        <!--        <h1 class="status" th:text="${item.status}">배송완료</h1>-->
        <div class="statusDiv">
            <span class="status" th:if="${(item.status == 'OK') || (item.status == 'REVIEW')}">결제완료</span>
            <span class="status" th:if="${item.status == 'CANCEL'}">취소 처리중</span>
            <span class="status" th:if="${item.status == 'CANCEL_OK'}">취소 완료</span>
        </div>
        <div class="row" style="width: 500px;">
            <div class="col-auto">
                <img th:src="${item.goods.image}" id="productImage" class="productImage" alt="Product Image">
            </div>
            <div class="productDiv col">
                <a class="productInfo" th:text="${item.regdate}">7.10.12:00</a>
                <!--                th:text="${item.regdate}"-->
                <br>
                <a class="productInfo" th:text="${item.goods.name}">상품이름상품이름상품이름상품이름상품이름</a><br>
                <a class="productInfo" th:text="${item.amount} + '원'">12345원 1개</a><br>
                <a class="productInfo" th:text="${item.opt}">@@@</a><br>
            </div>
        </div>
        <!-- 배송완료 상태만 리뷰작성 버튼 보이게 -->
        <div th:if="${item.status == 'OK'}">
            <div class="btnDiv">
                <a th:href="@{/review(id=${item.id})}">리뷰작성</a>
                <button class="cancel-request"
                        th:mId="${item.merchantId}"
                        th:image="${item.goods.image}"
                        th:goods_name="${item.goods.name}"
                        th:price="${item.goods.price}"
                        onclick="cancel(this.getAttribute('mId') ,this.getAttribute('image'),
                            this.getAttribute('goods_name'),
                            this.getAttribute('price'))">
                    결제취소 </button>
            </div>
        </div>
        <br><br>
    </div>
</div><br>
<br><br>
<!--결제 취소시 나타나는 모달창-->
<div class="card" >
    <div class="card-img"><img src="" alt="" class="img"></div>
    <div class="card-title">Product title</div>
    <hr class="card-divider">
    <div class="card-footer">
        <div class="card-price">123.45</div>
        <button class="card-btn">
            결제취소
        </button>
    </div>
</div>

</body>


</html>
